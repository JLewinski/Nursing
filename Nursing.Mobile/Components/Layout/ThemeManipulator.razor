@inject IJSRuntime JSRuntime
@inject Nursing.Mobile.Services.CacheService Database

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        var settings = await Database.GetSettings();

        var isDarkTheme = settings.Theme switch
        {
            ThemeSetting.Dark => true,
            ThemeSetting.Light => false,
            ThemeSetting.Auto => await JSRuntime.InvokeAsync<bool>("themeManager.isDarkPreferred"),
            _ => throw new NotImplementedException()
        };

        await JSRuntime.InvokeVoidAsync("themeManager.toggleTheme", isDarkTheme);
    }
}